require 'spec_helper'

describe Listing do
  before(:each) do
    @listing = FactoryGirl.build(:listing) 
  end

  it "should have an user method" do
    @listing.should respond_to(:user)
  end

  it "should have an organization method" do
    @listing.should respond_to(:organization) 
  end

  it "should have an org_listings method" do
    @listing.should respond_to(:org_listings)
  end

  it "should have an listing_categories method" do
    @listing.should respond_to(:listing_categories)
  end

  describe "when title is empty" do
    before { @listing.title = "" }
    it { should_not be_valid }
  end

  describe "when description is empty" do
    before { @listing.description = "" }
    it { should_not be_valid }
  end

  describe "should include active listings" do
    FactoryGirl.build(:listing, status: 'active')
    it { Listing.active.should_not be_empty }
  end

  describe "should not include inactive listings" do
    FactoryGirl.build(:listing, status: 'inactive')
    it { Listing.active.should be_empty }
  end

end
