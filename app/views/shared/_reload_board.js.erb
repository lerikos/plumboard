// set vars
var parms = "&loc=" + "<%= params[:loc] %>" + "&search=" + "<%= params[:search] %>" + "&cid=" + "<%= params[:cid] %>"
var pathName = "<%= set_path_parse %>"

<% if @page > 1 %>
  $("#pxboard").append('<%= escape_javascript(render(partial: "#{set_partial_name}")) %>');
  $("#px-nav").html('<%= escape_javascript(render(partial: "#{set_next_page_path}")) %>');
<% else %>  
  $("#pxboard").html('<%= escape_javascript(render(partial: "#{set_partial_name}")) %>');
  $("#px-nav").html("<%= escape_javascript(render(partial: "#{set_init_next_page_path}")) %>");
<% end %>  

// set next page infinite scroll path
$('#px-container').infinitescroll({pathParse:[pathName, parms]});

// initialize infinite scroll
load_masonry('#px-nav', '#px-nav a.nxt-pg', '#pxboard .item', parseInt(get_item_size()));

// reload board
reload_board(this);

// hide elements
$('#nearby-map').hide('fast');

if($('.pixiPg') > 0)
  uiLoading(false);
else
  $('#spinner').hide(300);
