<% if @invoice.errors.any? %>
  $("#notice").hide(300);
  $("#form_errors").html("<%= escape_javascript( render(partial: 'shared/error_messages', locals: {target: @invoice})) %>");
<% else %>
  $("#notice").html("<%= escape_javascript(flash[:notice])%>");
  $("#notice").show(300);

  // check for mobile
  if($('#inv_mform').length > 0) {
    goToUrl('/invoices', true);
  }
  else {
    $("#inv_form").html("<%= escape_javascript( raw render(partial: 'shared/invoices')) %>");

    // toggle menu state
    var $this = $("#li_home");
    reset_menu_state($this, true);
  }
<% end %>

$('#spinner').hide(300);
