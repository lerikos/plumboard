<% if @usr.errors.any? %>
  $("#notice").hide(300);
  $("#form_errors").html("<%= escape_javascript( render(partial: 'shared/error_messages', locals: {target: @usr})) %>");
<% else %>
  var url = '/settings'

  // check for mobile
  if($('#usr-prof').length > 0) {
    goToUrl(url, true);
    uiLoading(false);
  }
  else {
    postFlashMsg('#flash_notice','success', 'Successfully saved changes.');
    $("#user_form").html("<%= escape_javascript( raw render(partial: @target, locals: {user: @usr})) %>");

    <% if @user == @usr %>
      $("#usr_fname").html("<%= escape_javascript( raw render(partial: 'shared/menu_user_name', locals: {user: @usr})) %>");
    <% end %>
  }
<% end %>

$('#spinner').hide(300);

